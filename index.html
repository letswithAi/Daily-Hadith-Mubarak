<!DOCTYPE html>
<html lang="ur" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Hadith Mubarak - Ø­Ø¯ÛŒØ« Ù…Ø¨Ø§Ø±Ú©</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#2D5016">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Hadith App">
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Icons -->
    <link rel="apple-touch-icon"
        href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9IiMyRDUwMTYiLz4KPHN2ZyB4PSI0OCIgeT0iNDgiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGQ9Ik0xMiA2QzEzLjEgNiAxNCA2LjkgMTQgOFYxMEgxNkMxNi41IDEwIDE3IDEwLjQgMTcgMTFDMTcgMTEuNiAxNi41IDEyIDE2IDEySDE0VjE0QzE0IDE1LjEgMTMuMSAxNiAxMiAxNkMxMC45IDE2IDEwIDE1LjEgMTAgMTRWMTJIOEMzLjUgMTIgNyAxMS42IDcgMTFDNyAxMC40IDcuNSAxMCA4IDEwSDEwVjhDMTAgNi45IDEwLjkgNiAxMiA2WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cjwvc3ZnPgo=">

    <style>
        :root {
            --primary-green: #2D5016;
            --light-green: #4A7C59;
            --gold: #D4AF37;
            --cream: #F7F5F0;
            --dark-green: #1A2E0A;
            --text-dark: #2C3E50;
            --shadow: rgba(45, 80, 22, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Amiri', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, #E8F5E8 100%);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .urdu-text {
            font-family: 'Amiri', serif;
            font-size: 1.2rem;
            line-height: 1.8;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--light-green) 100%);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 20px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header h1 {
            font-family: 'Amiri', serif;
            font-weight: 700;
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .celebration-text {
            text-align: center;
            font-size: 0.9rem;
            opacity: 0.9;
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem;
            border-radius: 10px;
            margin-top: 0.5rem;
        }

        /* Main Content Area */
        .main-content {
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(45, 80, 22, 0.1);
            overflow: hidden;
            margin-top: 1rem;
        }

        /* Navigation */
        .nav-pills {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 0.25rem;
        }

        .nav-pills .nav-link {
            border-radius: 8px;
            color: white;
            font-weight: 500;
            padding: 0.5rem 1rem;
            margin: 0 0.25rem;
            transition: all 0.3s ease;
            border: none;
        }

        .nav-pills .nav-link.active {
            background: white;
            color: var(--primary-green);
            font-weight: 600;
        }

        /* Content Layout */
        .content-body {
            padding: 2rem;
            min-height: 70vh;
        }

        /* Left Side - Hadith */
        .hadith-section {
            border-right: 2px solid #f0f0f0;
            padding-right: 2rem;
        }

        .hadith-card {
            background: linear-gradient(135deg, #f8f9fa, white);
            border-radius: 15px;
            padding: 2rem;
            border-left: 5px solid var(--gold);
            position: relative;
            min-height: 400px;
        }

        .hadith-card::before {
            content: '"';
            font-size: 4rem;
            color: var(--gold);
            position: absolute;
            top: -10px;
            right: 20px;
            opacity: 0.3;
        }

        .hadith-text {
            font-size: 1.3rem;
            line-height: 2;
            margin-bottom: 2rem;
            text-align: justify;
        }

        .hadith-reference {
            background: rgba(45, 80, 22, 0.05);
            padding: 1rem;
            border-radius: 10px;
            font-size: 0.9rem;
            text-align: center;
            border: 1px solid rgba(45, 80, 22, 0.1);
            margin-bottom: 1.5rem;
        }

        /* Schedule Selection */
        .schedule-selection {
            text-align: center;
            padding: 3rem 2rem;
        }

        .schedule-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .schedule-option {
            background: linear-gradient(135deg, white, #f8f9fa);
            border: 2px solid rgba(45, 80, 22, 0.1);
            border-radius: 15px;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .schedule-option:hover {
            border-color: var(--primary-green);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(45, 80, 22, 0.15);
        }

        .schedule-option.selected {
            border-color: var(--primary-green);
            background: rgba(45, 80, 22, 0.05);
        }

        .schedule-icon {
            font-size: 2rem;
            color: var(--primary-green);
            margin-bottom: 1rem;
        }

        /* Right Side - Dashboard & Settings */
        .sidebar-section {
            padding-left: 2rem;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .btn {
            border-radius: 50px;
            padding: 0.75rem 1.5rem;
            font-weight: 500;
            transition: all 0.3s ease;
            border: none;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-green), var(--light-green));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(45, 80, 22, 0.3);
            background: linear-gradient(135deg, var(--dark-green), var(--primary-green));
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }

        .btn-outline-primary {
            border: 2px solid var(--primary-green);
            color: var(--primary-green);
        }

        .btn-outline-primary:hover {
            background: var(--primary-green);
            color: white;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Practice Question */
        .practice-question {
            background: rgba(255, 193, 7, 0.1);
            border: 2px solid #ffc107;
            border-radius: 15px;
            padding: 1.5rem;
            margin: 1rem 0;
            text-align: center;
        }

        .practice-options {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1rem;
        }

        /* Dashboard Stats */
        .stat-card {
            background: linear-gradient(135deg, white, #f8f9fa);
            border: none;
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 5px 20px rgba(45, 80, 22, 0.1);
            transition: all 0.3s ease;
            margin-bottom: 1rem;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(45, 80, 22, 0.15);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-green);
            display: block;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        /* Progress Bar */
        .progress {
            height: 12px;
            border-radius: 10px;
            background: rgba(45, 80, 22, 0.1);
            overflow: hidden;
        }

        .progress-bar {
            background: linear-gradient(90deg, var(--primary-green), var(--light-green));
            border-radius: 10px;
            transition: width 0.6s ease;
        }

        /* Settings */
        .form-control,
        .form-select {
            border-radius: 10px;
            border: 2px solid rgba(45, 80, 22, 0.1);
            padding: 0.75rem 1rem;
            transition: all 0.3s ease;
        }

        .form-control:focus,
        .form-select:focus {
            border-color: var(--primary-green);
            box-shadow: 0 0 0 0.2rem rgba(45, 80, 22, 0.1);
        }

        /* Notification Status */
        .notification-status {
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid var(--gold);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .notification-status.enabled {
            background: rgba(40, 167, 69, 0.1);
            border-color: #28a745;
        }

        .notification-status.disabled {
            background: rgba(220, 53, 69, 0.1);
            border-color: #dc3545;
        }

        .notification-test-section {
            background: rgba(13, 202, 240, 0.1);
            border: 1px solid #0dcaf0;
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            text-align: center;
        }

        /* PWA Install Prompt */
        .pwa-install-prompt {
            background: rgba(102, 16, 242, 0.1);
            border: 1px solid #6610f2;
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pwa-install-prompt:hover {
            background: rgba(102, 16, 242, 0.2);
            transform: translateY(-2px);
        }

        .pwa-install-prompt.hidden {
            display: none;
        }

        /* Islamic Decoration */
        .islamic-decoration {
            text-align: center;
            margin: 1rem 0;
            color: var(--gold);
            font-size: 1.5rem;
        }

        .d-none {
            display: none !important;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Mobile Optimization */
        @media (max-width: 768px) {
            .container {
                padding: 0 10px;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .content-body {
                padding: 1rem;
            }

            .hadith-section {
                border-right: none;
                border-bottom: 2px solid #f0f0f0;
                padding-right: 0;
                padding-bottom: 2rem;
                margin-bottom: 2rem;
            }

            .sidebar-section {
                padding-left: 0;
            }

            .schedule-options {
                grid-template-columns: 1fr;
            }

            .practice-options {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <div class="header">
        <div class="container">
            <h1><i class="fas fa-mosque"></i> Daily Hadith Mubarak</h1>
            <div class="celebration-text">
                <i class="fas fa-star"></i>
                Celebrating 1500th Blessed Year of Prophet Muhammad ï·º
                <br>
                <small>Ø¬Ø´Ù† ÙˆÙ„Ø§Ø¯Øª Ø§Ù„Ù†Ø¨ÛŒ ï·º Ù…Ø¨Ø§Ø±Ú©</small>
                <i class="fas fa-star"></i>

                <!-- Navigation moved to header -->
                <div class="row mt-3">
                    <div class="col-12">
                        <ul class="nav nav-pills justify-content-center" id="mainNav">
                            <li class="nav-item">
                                <button class="nav-link active" id="hadith-nav" onclick="showSection('hadith')">
                                    <i class="fas fa-book-open"></i> Today's Hadith
                                </button>
                            </li>
                            <li class="nav-item">
                                <button class="nav-link" id="dashboard-nav" onclick="showSection('dashboard')">
                                    <i class="fas fa-chart-line"></i> Dashboard
                                </button>
                            </li>
                            <li class="nav-item">
                                <button class="nav-link" id="settings-nav" onclick="showSection('settings')">
                                    <i class="fas fa-cog"></i> Settings
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="main-content">
            <div class="content-body">

                <!-- Schedule Selection (Initial Screen) -->
                <div id="schedule-selection" class="schedule-selection">
                    <h2 class="mb-4 urdu-text">Ø§Ø¹Ù…Ø§Ù„ Ú©Ø§ Ø¯Ø§Ø±ÙˆÙ…Ø¯Ø§Ø± Ù†ÛŒØªÙˆÚº Ù¾Ø± ÛÛ’</h2>
                    <p class="lead">Ø§Ù¾Ù†Ø§ Ù…Ø·Ø§Ù„Ø¹Û Ø´ÛŒÚˆÙˆÙ„ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº</p>

                    <!-- PWA Install Prompt -->
                    <div id="pwa-install-prompt" class="pwa-install-prompt hidden" onclick="installPWA()">
                        <h6><i class="fas fa-download"></i> Ø¨ÛØªØ± ØªØ¬Ø±Ø¨Û’ Ú©Û’ Ù„ÛŒÛ’ Ø§ÛŒÙ¾ Ø§Ù†Ø³Ù¹Ø§Ù„ Ú©Ø±ÛŒÚº</h6>
                        <p class="small">Ø§ÛŒÙ¾ Ø§Ù†Ø³Ù¹Ø§Ù„ Ú©Ø±Ù†Û’ Ø³Û’ Ø¢Ù¾ Ú©Ùˆ Ø¨ÛØªØ± background notifications Ù…Ù„ÛŒÚº Ú¯ÛŒ</p>
                    </div>

                    <div class="schedule-options">
                        <div class="schedule-option" data-schedule="today" onclick="selectSchedule('today')">
                            <div class="schedule-icon">
                                <i class="fas fa-calendar-day"></i>
                            </div>
                            <h5>Ø¢Ø¬ Ú©Ø§ Ø´ÛŒÚˆÙˆÙ„</h5>
                            <p>Ø¢Ø¬ Ú©ÛŒ Ø§ÛŒÚ© Ø­Ø¯ÛŒØ«</p>
                        </div>
                        <div class="schedule-option" data-schedule="week" onclick="selectSchedule('week')">
                            <div class="schedule-icon">
                                <i class="fas fa-calendar-week"></i>
                            </div>
                            <h5>ÛÙØªÛ ÙˆØ§Ø± Ø´ÛŒÚˆÙˆÙ„</h5>
                            <p>Ø³Ø§Øª Ø¯Ù† Ú©Û’ Ù„ÛŒÛ’ Ø§Ø­Ø§Ø¯ÛŒØ«</p>
                        </div>
                        <div class="schedule-option" data-schedule="month" onclick="selectSchedule('month')">
                            <div class="schedule-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <h5>Ù…Ø§ÛØ§Ù†Û Ø´ÛŒÚˆÙˆÙ„</h5>
                            <p>Ø§ÛŒÚ© Ù…Ø§Û Ú©Û’ Ù„ÛŒÛ’ Ø§Ø­Ø§Ø¯ÛŒØ«</p>
                        </div>
                    </div>
                    <div class="mt-4">
                        <button class="btn btn-primary btn-lg" id="start-schedule" onclick="startSelectedSchedule()"
                            disabled>
                            <i class="fas fa-play"></i> Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº
                        </button>
                    </div>
                </div>

                <!-- Main Content (Hadith + Sidebar) -->
                <div id="main-content" class="d-none">
                    <div class="row">
                        <!-- Left Side - Hadith -->
                        <div class="col-lg-8" id="hadith-section">
                            <div class="hadith-section">
                                <div class="text-center mb-3">
                                    <h3><i class="fas fa-calendar-day"></i> Hadith of the Day</h3>
                                    <small id="currentDate"></small>
                                    <div class="islamic-decoration">â˜ª â‹ â˜ª</div>
                                </div>

                                <div class="hadith-card fade-in">
                                    <div class="hadith-text urdu-text" id="hadithText">
                                        Loading today's Hadith...
                                    </div>
                                </div>

                                <div class="hadith-reference" id="hadithReference">
                                    Reference loading...
                                </div>

                                <!-- Practice Question -->
                                <div class="practice-question" id="practice-question">
                                    <h5>Ú©ÛŒØ§ Ø¢Ù¾ Ù†Û’ Ø§Ø³ Ø­Ø¯ÛŒØ« Ù¾Ø± Ø¹Ù…Ù„ Ú©ÛŒØ§ØŸ</h5>
                                    <div class="practice-options">
                                        <button class="btn btn-success" onclick="markAsPracticed(true)">
                                            <i class="fas fa-check"></i> Ø¬ÛŒ ÛØ§Úº
                                        </button>
                                        <button class="btn btn-outline-primary" onclick="markAsPracticed(false)">
                                            <i class="fas fa-times"></i> Ù†ÛÛŒÚº
                                        </button>
                                    </div>
                                </div>

                                <div class="text-center mt-3">
                                    <button class="btn btn-primary" onclick="getRandomHadith()">
                                        <i class="fas fa-random"></i> Ø§Ú¯Ù„ÛŒ Ø­Ø¯ÛŒØ«
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Right Side - Dashboard/Settings -->
                        <div class="col-lg-4" id="sidebar-section">
                            <div class="sidebar-section">

                                <!-- Dashboard Content -->
                                <div id="dashboard-content">
                                    <h5 class="mb-3"><i class="fas fa-chart-line"></i> Ø¢Ù¾ Ú©ÛŒ Ù¾ÛŒØ´ Ù‚Ø¯Ù…ÛŒ</h5>

                                    <div class="stat-card">
                                        <span class="stat-number" id="totalRead">0</span>
                                        <div class="stat-label">Ú©Ù„ Ù¾Ú‘Ú¾ÛŒ Ú¯Ø¦ÛŒ Ø§Ø­Ø§Ø¯ÛŒØ«</div>
                                    </div>

                                    <div class="stat-card">
                                        <span class="stat-number" id="totalPracticed">0</span>
                                        <div class="stat-label">Ø¹Ù…Ù„ Ú©ÛŒ Ú¯Ø¦ÛŒ Ø§Ø­Ø§Ø¯ÛŒØ«</div>
                                    </div>

                                    <div class="stat-card">
                                        <span class="stat-number" id="currentStreak">0</span>
                                        <div class="stat-label">Ù…Ø³Ù„Ø³Ù„ Ø¯Ù†</div>
                                    </div>

                                    <div class="mt-3">
                                        <h6>ÛÙØªÛ ÙˆØ§Ø± Ù¾ÛŒØ´ Ù‚Ø¯Ù…ÛŒ</h6>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Ù¾Ø±ÙˆÚ¯Ø±Ø³</span>
                                            <span id="weeklyProgress">0/7</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar" id="weeklyProgressBar" style="width: 0%"></div>
                                        </div>
                                    </div>

                                    <div class="mt-3">
                                        <h6>Ù…Ø§ÛØ§Ù†Û Ù¾ÛŒØ´ Ù‚Ø¯Ù…ÛŒ</h6>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>Ù¾Ø±ÙˆÚ¯Ø±Ø³</span>
                                            <span id="monthlyProgress">0/30</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar" id="monthlyProgressBar" style="width: 0%"></div>
                                        </div>
                                    </div>

                                    <!-- Recent Hadiths -->
                                    <div class="mt-4">
                                        <h6>Ø­Ø§Ù„ÛŒÛ Ù¾Ú‘Ú¾ÛŒ Ú¯Ø¦ÛŒ Ø§Ø­Ø§Ø¯ÛŒØ«</h6>
                                        <div id="recentHadiths" class="mt-2">
                                            <!-- Will be populated by JavaScript -->
                                        </div>
                                    </div>
                                </div>

                                <!-- Settings Content -->
                                <div id="settings-content" class="d-none">
                                    <h5 class="mb-3"><i class="fas fa-cog"></i> ØªØ±ØªÛŒØ¨Ø§Øª</h5>

                                    <!-- PWA Install Prompt in Settings -->
                                    <div id="pwa-install-prompt-settings" class="pwa-install-prompt hidden"
                                        onclick="installPWA()">
                                        <h6><i class="fas fa-download"></i> Ø§ÛŒÙ¾ Ø§Ù†Ø³Ù¹Ø§Ù„ Ú©Ø±ÛŒÚº</h6>
                                        <p class="small">Ø¨ÛØªØ± background notifications Ú©Û’ Ù„ÛŒÛ’</p>
                                    </div>

                                    <!-- Notification Status -->
                                    <div id="notificationStatus" class="notification-status">
                                        <div id="notificationStatusText">
                                            <i class="fas fa-bell-slash"></i> ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ Ú©ÛŒ Ø§Ø¬Ø§Ø²Øª Ù†ÛÛŒÚº Ù…Ù„ÛŒ
                                        </div>
                                        <button class="btn btn-sm btn-outline-primary mt-2" id="requestNotificationBtn"
                                            onclick="requestNotificationPermission()">
                                            Ø§Ø¬Ø§Ø²Øª Ø·Ù„Ø¨ Ú©Ø±ÛŒÚº
                                        </button>
                                    </div>

                                    <!-- Test Notification -->
                                    <div class="notification-test-section">
                                        <h6><i class="fas fa-test-tube"></i> ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ Ù¹ÛŒØ³Ù¹ Ú©Ø±ÛŒÚº</h6>
                                        <p class="small">Ú†ÛŒÚ© Ú©Ø±ÛŒÚº Ú©Û notifications Ú©Ø§Ù… Ú©Ø± Ø±ÛÛŒ ÛÛŒÚº</p>
                                        <button class="btn btn-outline-info btn-sm" onclick="testNotification()">
                                            <i class="fas fa-bell"></i> Ù¹ÛŒØ³Ù¹ Ú©Ø±ÛŒÚº
                                        </button>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">Ø´ÛŒÚˆÙˆÙ„ ØªØ¨Ø¯ÛŒÙ„ Ú©Ø±ÛŒÚº</label>
                                        <select class="form-select" id="schedule-change">
                                            <option value="today">Ø¢Ø¬ Ú©Ø§ Ø´ÛŒÚˆÙˆÙ„</option>
                                            <option value="week">ÛÙØªÛ ÙˆØ§Ø± Ø´ÛŒÚˆÙˆÙ„</option>
                                            <option value="month">Ù…Ø§ÛØ§Ù†Û Ø´ÛŒÚˆÙˆÙ„</option>
                                        </select>
                                    </div>

                                    <hr class="my-4">

                                    <div class="mb-3">
                                        <h6><i class="fas fa-bell"></i> ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ Ú©ÛŒ ØªØ±ØªÛŒØ¨Ø§Øª</h6>
                                        <small class="text-muted">Ø¢Ù¾ Ú©Û’ set Ú©ÛŒÛ’ Ú¯Ø¦Û’ ÙˆÙ‚Øª Ù¾Ø± notification Ø¢Ø¦Û’ Ú¯ÛŒ</small>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">ØµØ¨Ø­ Ú©ÛŒ ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ</label>
                                        <input type="time" class="form-control" id="morningTime" value="07:00">
                                        <div class="form-check mt-2">
                                            <input class="form-check-input" type="checkbox" id="morningEnabled"
                                                onchange="updateNotificationSchedule()">
                                            <label class="form-check-label">ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ Ú†Ø§Ù„Ùˆ Ú©Ø±ÛŒÚº</label>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">Ø´Ø§Ù… Ú©ÛŒ ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ</label>
                                        <input type="time" class="form-control" id="eveningTime" value="19:00">
                                        <div class="form-check mt-2">
                                            <input class="form-check-input" type="checkbox" id="eveningEnabled"
                                                onchange="updateNotificationSchedule()">
                                            <label class="form-check-label">ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ Ú†Ø§Ù„Ùˆ Ú©Ø±ÛŒÚº</label>
                                        </div>
                                    </div>

                                    <div class="text-center mb-4">
                                        <button class="btn btn-primary" onclick="saveSettings()">
                                            <i class="fas fa-save"></i> Ù…Ø­ÙÙˆØ¸ Ú©Ø±ÛŒÚº
                                        </button>
                                    </div>

                                    <!-- Next Notification Info -->
                                    <div id="nextNotificationInfo" class="alert alert-info d-none">
                                        <h6><i class="fas fa-clock"></i> Ø§Ú¯Ù„ÛŒ ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ</h6>
                                        <div id="nextNotificationTime"></div>
                                    </div>

                                    <hr class="my-4">

                                    <div class="text-center">
                                        <h6>Ø§ÛŒÙ¾ Ú©ÛŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</h6>
                                        <p class="small text-muted mb-3">
                                            ÛŒÛ Ø§ÛŒÙ¾ Ø­Ø¶Ø±Øª Ù…Ø­Ù…Ø¯ ï·º Ú©Û’ 1500ÙˆÛŒÚº Ø³Ø§Ù„ Ú©ÛŒ Ù…Ù†Ø§Ø³Ø¨Øª Ø³Û’ Ø¨Ù†Ø§ÛŒØ§ Ú¯ÛŒØ§ ÛÛ’Û”
                                        </p>
                                        <button class="btn btn-outline-danger" onclick="resetProgress()">
                                            <i class="fas fa-trash"></i> ØªÙ…Ø§Ù… ÚˆÛŒÙ¹Ø§ ØµØ§Ù Ú©Ø±ÛŒÚº
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // Hadith data
        const ahadithData = {
            "ahadith": [
                { "id": 1, "hadith": "ØªÙ… Ù…ÛŒÚº Ø³Û’ Ø¨ÛØªØ± ÙˆÛ ÛÛ’ Ø¬Ùˆ Ù‚Ø±Ø¢Ù† Ø³ÛŒÚ©Ú¾Û’ Ø§ÙˆØ± Ø³Ú©Ú¾Ø§Ø¦Û’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ ÙØ¶Ø§Ø¦Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù†ØŒ Ø­Ø¯ÛŒØ« 5027" },
                { "id": 2, "hadith": "Ø§Ø¹Ù…Ø§Ù„ Ú©Ø§ Ø¯Ø§Ø±ÙˆÙ…Ø¯Ø§Ø± Ù†ÛŒØªÙˆÚº Ù¾Ø± ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø¨Ø¯Ø¡ Ø§Ù„ÙˆØ­ÛŒØŒ Ø­Ø¯ÛŒØ« 1 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø§Ù…Ø§Ø±Ø©ØŒ Ø­Ø¯ÛŒØ« 1907" },
                { "id": 3, "hadith": "Ù…ÙˆÙ…Ù† Ú©Û’ Ù„Ø¦Û’ Ø³Ø¨ Ø³Û’ Ø¨ÛØªØ±ÛŒÙ† Ø¹Ù…Ù„ Ù†Ù…Ø§Ø² Ú©Ùˆ ÙˆÙ‚Øª Ù¾Ø± Ù¾Ú‘Ú¾Ù†Ø§ ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©ØŒ Ø­Ø¯ÛŒØ« 527 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø§ÛŒÙ…Ø§Ù†ØŒ Ø­Ø¯ÛŒØ« 85" },
                { "id": 4, "hadith": "Ù…Ø³Ù„Ù…Ø§Ù† ÙˆÛ ÛÛ’ Ø¬Ø³ Ú©ÛŒ Ø²Ø¨Ø§Ù† Ø§ÙˆØ± ÛØ§ØªÚ¾ Ø³Û’ Ø¯ÙˆØ³Ø±Û’ Ù…Ø³Ù„Ù…Ø§Ù† Ù…Ø­ÙÙˆØ¸ Ø±ÛÛŒÚºÛ”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ø§ÛŒÙ…Ø§Ù†ØŒ Ø­Ø¯ÛŒØ« 10 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø§ÛŒÙ…Ø§Ù†ØŒ Ø­Ø¯ÛŒØ« 40" },
                { "id": 5, "hadith": "Ø¨Û’ Ø´Ú© Ø§Ù„Ù„Û ØªØ¹Ø§Ù„ÛŒÙ° ØªÙ…ÛØ§Ø±Û’ Ø¬Ø³Ù…ÙˆÚº Ø§ÙˆØ± Ø´Ú©Ù„ÙˆÚº Ú©Ùˆ Ù†ÛÛŒÚº Ø¯ÛŒÚ©Ú¾ØªØ§ Ø¨Ù„Ú©Û ØªÙ…ÛØ§Ø±Û’ Ø¯Ù„ÙˆÚº Ø§ÙˆØ± Ø§Ø¹Ù…Ø§Ù„ Ú©Ùˆ Ø¯ÛŒÚ©Ú¾ØªØ§ ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø¨Ø±ØŒ Ø­Ø¯ÛŒØ« 2564" },
                { "id": 6, "hadith": "Ø¬Ùˆ Ø´Ø®Øµ Ø§Ù„Ù„Û Ø§ÙˆØ± Ø¢Ø®Ø±Øª Ú©Û’ Ø¯Ù† Ù¾Ø± Ø§ÛŒÙ…Ø§Ù† Ø±Ú©Ú¾ØªØ§ ÛÛ’ ÙˆÛ Ø§Ú†Ú¾ÛŒ Ø¨Ø§Øª Ú©ÛÛ’ ÛŒØ§ Ø®Ø§Ù…ÙˆØ´ Ø±ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ø§Ø¯Ø¨ØŒ Ø­Ø¯ÛŒØ« 6018 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø§ÛŒÙ…Ø§Ù†ØŒ Ø­Ø¯ÛŒØ« 47" },
                { "id": 7, "hadith": "Ù„ÙˆÚ¯ÙˆÚº Ù…ÛŒÚº Ø¨ÛØªØ±ÛŒÙ† ÙˆÛ ÛÛ’ Ø¬Ùˆ Ø¯ÙˆØ³Ø±ÙˆÚº Ú©Ùˆ ÙØ§Ø¦Ø¯Û Ù¾ÛÙ†Ú†Ø§Ø¦Û’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ø§Ù„Ø§Ø¯Ø¨ Ø§Ù„Ù…ÙØ±Ø¯ØŒ Ø­Ø¯ÛŒØ« 606" },
                { "id": 8, "hadith": "Ø¬Ø³ Ù†Û’ Ø§Ù¾Ù†Û’ Ø¨Ú¾Ø§Ø¦ÛŒ Ú©ÛŒ Ù¾Ø±Ø¯Û Ù¾ÙˆØ´ÛŒ Ú©ÛŒØŒ Ø§Ù„Ù„Û Ù‚ÛŒØ§Ù…Øª Ú©Û’ Ø¯Ù† Ø§Ø³ Ú©ÛŒ Ù¾Ø±Ø¯Û Ù¾ÙˆØ´ÛŒ Ú©Ø±Û’ Ú¯Ø§Û”", "reference": "ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø¨Ø±ØŒ Ø­Ø¯ÛŒØ« 2699" },
                { "id": 9, "hadith": "Ù…Ø³Ú©Ø±Ø§ÛÙ¹ Ø§Ù¾Ù†Û’ Ø¨Ú¾Ø§Ø¦ÛŒ Ú©Û’ Ù„Ø¦Û’ ØµØ¯Ù‚Û ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ø§Ù„Ø§Ø¯Ø¨ Ø§Ù„Ù…ÙØ±Ø¯ØŒ Ø­Ø¯ÛŒØ« 891 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø¨Ø±ØŒ Ø­Ø¯ÛŒØ« 2626" },
                { "id": 10, "hadith": "ØªÙ… Ù…ÛŒÚº Ø³Û’ Ú©ÙˆØ¦ÛŒ Ø¬Ù†Øª Ù…ÛŒÚº Ø¯Ø§Ø®Ù„ Ù†ÛÛŒÚº ÛÙˆÚ¯Ø§ Ø¬Ø¨ ØªÚ© ÙˆÛ Ø§ÛŒÙ…Ø§Ù† Ù†Û Ù„Ø§Ø¦Û’ØŒ Ø§ÙˆØ± Ø§ÛŒÙ…Ø§Ù† ÙˆØ§Ù„Ø§ Ù†ÛÛŒÚº ÛÙˆØ³Ú©ØªØ§ Ø¬Ø¨ ØªÚ© ÙˆÛ Ø§Ù¾Ù†Û’ Ø¨Ú¾Ø§Ø¦ÛŒ Ú©Û’ Ù„Ø¦Û’ ÙˆÛÛŒ Ù¾Ø³Ù†Ø¯ Ù†Û Ú©Ø±Û’ Ø¬Ùˆ Ø§Ù¾Ù†Û’ Ù„Ø¦Û’ Ú©Ø±ØªØ§ ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ø§ÛŒÙ…Ø§Ù†ØŒ Ø­Ø¯ÛŒØ« 13 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø§ÛŒÙ…Ø§Ù†ØŒ Ø­Ø¯ÛŒØ« 45" },
                { "id": 11, "hadith": "Ù¾Ø§Ú©ÛŒØ²Ú¯ÛŒ Ù†ØµÙ Ø§ÛŒÙ…Ø§Ù† ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø·ÛØ§Ø±ÛƒØŒ Ø­Ø¯ÛŒØ« 223" },
                { "id": 12, "hadith": "Ø¢Ø³Ø§Ù†ÛŒ Ù¾ÛŒØ¯Ø§ Ú©Ø±ÙˆØŒ ØªÙ†Ú¯ÛŒ Ù†Û Ú©Ø±ÙˆØŒ Ø®ÙˆØ´Ø®Ø¨Ø±ÛŒ Ø¯Ùˆ Ø§ÙˆØ± Ù†ÙØ±Øª Ù†Û Ø¯Ù„Ø§Ø¤Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ø¹Ù„Ù…ØŒ Ø­Ø¯ÛŒØ« 69 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø¬Ù‡Ø§Ø¯ØŒ Ø­Ø¯ÛŒØ« 1732" },
                { "id": 13, "hadith": "Ø¯ÛŒÙ† Ø¢Ø³Ø§Ù† ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ø§ÛŒÙ…Ø§Ù†ØŒ Ø­Ø¯ÛŒØ« 39" },
                { "id": 14, "hadith": "Ø¬Ùˆ Ø±Ø­Ù… Ù†ÛÛŒÚº Ú©Ø±ØªØ§ Ø§Ø³ Ù¾Ø± Ø±Ø­Ù… Ù†ÛÛŒÚº Ú©ÛŒØ§ Ø¬Ø§ØªØ§Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ø§Ø¯Ø¨ØŒ Ø­Ø¯ÛŒØ« 6013 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„ÙØ¶Ø§Ø¦Ù„ØŒ Ø­Ø¯ÛŒØ« 2319" },
                { "id": 15, "hadith": "Ø¬Ùˆ Ø´Ø®Øµ Ú©Ø³ÛŒ Ù…ØµÛŒØ¨Øª Ø²Ø¯Û Ú©Ùˆ ØªØ³Ù„ÛŒ Ø¯Û’ Ø§Ù„Ù„Û Ø§Ø³Û’ Ù‚ÛŒØ§Ù…Øª Ú©Û’ Ø¯Ù† Ø¹Ø²Øª Ø¹Ø·Ø§ ÙØ±Ù…Ø§Ø¦Û’ Ú¯Ø§Û”", "reference": "ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø¬Ù†Ø§Ø¦Ø²ØŒ Ø­Ø¯ÛŒØ« 927" },
                { "id": 16, "hadith": "Ø³Ø¨ Ø³Û’ Ø¨ÛØªØ± ÙˆÛ ÛÛ’ Ø¬Ùˆ Ø§Ù¾Ù†Û’ Ø§ÛÙ„ Ùˆ Ø¹ÛŒØ§Ù„ Ú©Û’ Ø³Ø§ØªÚ¾ Ø¨ÛØªØ± ÛÙˆÛ”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ù…Ù†Ø§Ù‚Ø¨ØŒ Ø­Ø¯ÛŒØ« 3559 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„ÙØ¶Ø§Ø¦Ù„ØŒ Ø­Ø¯ÛŒØ« 2326" },
                { "id": 17, "hadith": "ØªÙ… Ù…ÛŒÚº Ø³Ø¨ Ø³Û’ Ø²ÛŒØ§Ø¯Û Ø§Ù„Ù„Û Ú©Ùˆ Ù…Ø­Ø¨ÙˆØ¨ ÙˆÛ ÛÛ’ Ø¬Ùˆ Ø§Ø®Ù„Ø§Ù‚ Ù…ÛŒÚº Ø³Ø¨ Ø³Û’ Ø¨ÛØªØ± ÛÙˆÛ”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ø§Ù„Ø§Ø¯Ø¨ Ø§Ù„Ù…ÙØ±Ø¯ØŒ Ø­Ø¯ÛŒØ« 273 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„ÙØ¶Ø§Ø¦Ù„ØŒ Ø­Ø¯ÛŒØ« 2321" },
                { "id": 18, "hadith": "ØµØ¯Ù‚Û Ú¯Ù†Ø§ÛÙˆÚº Ú©Ùˆ Ø¨Ø¬Ú¾Ø§ØªØ§ ÛÛ’ Ø¬Ø³ Ø·Ø±Ø­ Ù¾Ø§Ù†ÛŒ Ø¢Ú¯ Ú©Ùˆ Ø¨Ø¬Ú¾Ø§ØªØ§ ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ø§Ù„Ø§Ø¯Ø¨ Ø§Ù„Ù…ÙØ±Ø¯ØŒ Ø­Ø¯ÛŒØ« 1352 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø²ÙƒØ§Ø©ØŒ Ø­Ø¯ÛŒØ« 2588" },
                { "id": 19, "hadith": "Ø¬Ùˆ Ø´Ø®Øµ Ø¹Ù„Ù… Ø­Ø§ØµÙ„ Ú©Ø±Ù†Û’ Ú©Û’ Ù„Ø¦Û’ Ø±Ø§Ø³ØªÛ Ø§Ø®ØªÛŒØ§Ø± Ú©Ø±ØªØ§ ÛÛ’ Ø§Ù„Ù„Û Ø§Ø³ Ú©Û’ Ù„Ø¦Û’ Ø¬Ù†Øª Ú©Ø§ Ø±Ø§Ø³ØªÛ Ø¢Ø³Ø§Ù† Ú©Ø±Ø¯ÛŒØªØ§ ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ø¹Ù„Ù…ØŒ Ø­Ø¯ÛŒØ« 71 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø°Ú©Ø±ØŒ Ø­Ø¯ÛŒØ« 2699" },
                { "id": 20, "hadith": "Ø§Ù„Ù„Û Ú©Û’ Ù†Ø²Ø¯ÛŒÚ© Ø³Ø¨ Ø³Û’ Ù…Ø­Ø¨ÙˆØ¨ Ø¹Ù…Ù„ ÙˆÛ ÛÛ’ Ø¬Ùˆ Ù…Ø³Ù„Ø³Ù„ ÛÙˆ Ú†Ø§ÛÛ’ ØªÚ¾ÙˆÚ‘Ø§ ÛÛŒ Ú©ÛŒÙˆÚº Ù†Û ÛÙˆÛ”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ø§ÛŒÙ…Ø§Ù†ØŒ Ø­Ø¯ÛŒØ« 6465 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ ØµÙ„Ø§Ø© Ø§Ù„Ù…Ø³Ø§ÙØ±ÛŒÙ†ØŒ Ø­Ø¯ÛŒØ« 782" },
                { "id": 21, "hadith": "Ù†Ù…Ø§Ø² Ø¬Ù†Øª Ú©ÛŒ Ú©Ù†Ø¬ÛŒ ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø·ÛØ§Ø±ÛƒØŒ Ø­Ø¯ÛŒØ« 224" },
                { "id": 22, "hadith": "Ø±ÙˆØ²Û ÚˆÚ¾Ø§Ù„ ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„ØµÙˆÙ…ØŒ Ø­Ø¯ÛŒØ« 1904 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„ØµÙŠØ§Ù…ØŒ Ø­Ø¯ÛŒØ« 1151" },
                { "id": 23, "hadith": "Ø­Ø¬ Ù…Ø¨Ø±ÙˆØ± Ú©Ø§ Ø¨Ø¯Ù„Û Ø¬Ù†Øª Ú©Û’ Ø³ÙˆØ§ Ú©Ú†Ú¾ Ù†ÛÛŒÚºÛ”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ø­Ø¬ØŒ Ø­Ø¯ÛŒØ« 1773 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø­Ø¬ØŒ Ø­Ø¯ÛŒØ« 1349" },
                { "id": 24, "hadith": "Ø§Ù„Ù„Û ØªØ¹Ø§Ù„ÛŒÙ° Ú©Û’ Ù†Ø²Ø¯ÛŒÚ© Ø³Ø¨ Ø³Û’ Ù…Ø­Ø¨ÙˆØ¨ Ø¬Ú¯Û Ù…Ø³Ø¬Ø¯ ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¬Ø¯ØŒ Ø­Ø¯ÛŒØ« 671" },
                { "id": 25, "hadith": "Ø¨Û’ Ø´Ú© Ø§Ù„Ù„Û ØªØ¹Ø§Ù„ÛŒÙ° Ù¾Ø§Ú© ÛÛ’ Ø§ÙˆØ± Ù¾Ø§Ú©ÛŒØ²Ú¯ÛŒ Ú©Ùˆ Ù¾Ø³Ù†Ø¯ Ú©Ø±ØªØ§ ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø·ÛØ§Ø±ÛƒØŒ Ø­Ø¯ÛŒØ« 223" },
                { "id": 26, "hadith": "Ø¨Û’ Ø´Ú© Ø°Ú©Ø± Ú©Ø±Ù†Û’ ÙˆØ§Ù„ÙˆÚº Ú©Û’ Ù„Ø¦Û’ ÙØ±Ø´ØªÛ’ Ø§Ù¾Ù†Û’ Ù¾Ø±ÙˆÚº Ú©Ùˆ Ø¨Ú†Ú¾Ø§ØªÛ’ ÛÛŒÚºÛ”", "reference": "ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø°Ú©Ø±ØŒ Ø­Ø¯ÛŒØ« 2700" },
                { "id": 27, "hadith": "Ù…Ø³Ù„Ù…Ø§Ù† Ú©Û’ Ù„Ø¦Û’ Ø³Ø¨ Ø³Û’ Ø¨Ú‘ÛŒ Ø¯ÙˆÙ„Øª Ù‚Ù†Ø§Ø¹Øª ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø²Ú¾Ø¯ØŒ Ø­Ø¯ÛŒØ« 1054" },
                { "id": 28, "hadith": "Ù…ÙˆÙ…Ù† Ú©Û’ Ø§ÛŒÙ…Ø§Ù† Ú©Ø§ Ø³Ø¨ Ø³Û’ Ú©Ø§Ù…Ù„ Ø¯Ø±Ø¬Û ÛŒÛ ÛÛ’ Ú©Û ÙˆÛ Ø§Ú†Ú¾Û’ Ø§Ø®Ù„Ø§Ù‚ ÙˆØ§Ù„Ø§ ÛÙˆÛ”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ø§Ù„Ø§Ø¯Ø¨ Ø§Ù„Ù…ÙØ±Ø¯ØŒ Ø­Ø¯ÛŒØ« 273 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø§ÛŒÙ…Ø§Ù†ØŒ Ø­Ø¯ÛŒØ« 79" },
                { "id": 29, "hadith": "Ø§Ù„Ù„Û ØªØ¹Ø§Ù„ÛŒÙ° Ø§Ù¾Ù†Û’ Ø¨Ù†Ø¯Û’ Ú©ÛŒ ØªÙˆØ¨Û Ø³Û’ Ø§Ø³ Ø³Û’ Ø²ÛŒØ§Ø¯Û Ø®ÙˆØ´ ÛÙˆØªØ§ ÛÛ’ Ø¬ØªÙ†Ø§ Ú©ÙˆØ¦ÛŒ Ú¯Ù… Ø´Ø¯Û Ø³ÙˆØ§Ø±ÛŒ ÙˆØ§Ù„Ø§ Ø§Ù¾Ù†ÛŒ Ø³ÙˆØ§Ø±ÛŒ Ù…Ù„Ù†Û’ Ù¾Ø± Ø®ÙˆØ´ ÛÙˆØªØ§ ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ø¯Ø¹ÙˆØ§ØªØŒ Ø­Ø¯ÛŒØ« 6309 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„ØªÙˆØ¨Ø©ØŒ Ø­Ø¯ÛŒØ« 2744" },
                { "id": 30, "hadith": "Ø¬Ø³ Ù†Û’ Ø¹Ù„Ù… Ú†Ú¾Ù¾Ø§ÛŒØ§ØŒ Ø§Ù„Ù„Û Ø§Ø³Û’ Ù‚ÛŒØ§Ù…Øª Ú©Û’ Ø¯Ù† Ø¢Ú¯ Ú©ÛŒ Ù„Ú¯Ø§Ù… Ù¾ÛÙ†Ø§Ø¦Û’ Ú¯Ø§Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ø¹Ù„Ù…ØŒ Ø­Ø¯ÛŒØ« 67" },
                { "id": 31, "hadith": "Ø¬Ùˆ Ø§Ù„Ù„Û Ú©Û’ Ù„Ø¦Û’ Ù…Ø³Ø¬Ø¯ Ø¨Ù†Ø§Ø¦Û’ Ø§Ù„Ù„Û Ø§Ø³ Ú©Û’ Ù„Ø¦Û’ Ø¬Ù†Øª Ù…ÛŒÚº Ú¯Ú¾Ø± Ø¨Ù†Ø§Ø¦Û’ Ú¯Ø§Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„ØµÙ„ÙˆØ©ØŒ Ø­Ø¯ÛŒØ« 450 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¬Ø¯ØŒ Ø­Ø¯ÛŒØ« 533" },
                { "id": 32, "hadith": "Ø¬Ùˆ Ø¬Ú¾ÙˆÙ¹ Ú©Ùˆ Ú†Ú¾ÙˆÚ‘ Ø¯Û’ Ø§Ù„Ù„Û Ø§Ø³ Ú©Û’ Ù„Ø¦Û’ Ø¬Ù†Øª Ú©Û’ Ø¨ÛŒÚ† Ù…ÛŒÚº Ú¯Ú¾Ø± Ø¨Ù†Ø§Ø¦Û’ Ú¯Ø§Û”", "reference": "ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø¨Ø±ØŒ Ø­Ø¯ÛŒØ« 2609" },
                { "id": 33, "hadith": "Ù†Ù…Ø§Ø² Ø¯ÛŒÙ† Ú©Ø§ Ø³ØªÙˆÙ† ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø·ÛØ§Ø±ÛƒØŒ Ø­Ø¯ÛŒØ« 223" },
                { "id": 34, "hadith": "Ø¬Ùˆ ØµÙ„Û Ø±Ø­Ù…ÛŒ Ú©Ø±ØªØ§ ÛÛ’ Ø§Ù„Ù„Û Ø§Ø³ Ú©Û’ Ø±Ø²Ù‚ Ù…ÛŒÚº Ø¨Ø±Ú©Øª Ø¯ÛŒØªØ§ ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ø§Ø¯Ø¨ØŒ Ø­Ø¯ÛŒØ« 5986 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø¨Ø±ØŒ Ø­Ø¯ÛŒØ« 2557" },
                { "id": 35, "hadith": "ØªÙ… Ù…ÛŒÚº Ø³Ø¨ Ø³Û’ Ù‚ÙˆÛŒ ÙˆÛ ÛÛ’ Ø¬Ùˆ ØºØµÛ’ Ú©Û’ ÙˆÙ‚Øª Ø§Ù¾Ù†Û’ Ø¢Ù¾ Ù¾Ø± Ù‚Ø§Ø¨Ùˆ Ù¾Ø§Ø¦Û’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ø§Ø¯Ø¨ØŒ Ø­Ø¯ÛŒØ« 6114 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø¨Ø±ØŒ Ø­Ø¯ÛŒØ« 2609" },
                { "id": 36, "hadith": "Ù…Ø³Ù„Ù…Ø§Ù† Ù…Ø³Ù„Ù…Ø§Ù† Ú©Ø§ Ø¨Ú¾Ø§Ø¦ÛŒ ÛÛ’ØŒ Ù†Û Ø§Ø³ Ù¾Ø± Ø¸Ù„Ù… Ú©Ø±ØªØ§ ÛÛ’ Ø§ÙˆØ± Ù†Û Ø§Ø³ Ú©Ùˆ Ø±Ø³ÙˆØ§ Ú©Ø±ØªØ§ ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ù…Ø¸Ø§Ù„Ù…ØŒ Ø­Ø¯ÛŒØ« 2442 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø¨Ø±ØŒ Ø­Ø¯ÛŒØ« 2564" },
                { "id": 37, "hadith": "Ø§Ù„Ù„Û Ú©Û’ Ù†Ø²Ø¯ÛŒÚ© Ø³Ø¨ Ø³Û’ Ø²ÛŒØ§Ø¯Û Ù…Ø­Ø¨ÙˆØ¨ Ø¹Ù…Ù„ Ø®ÙˆØ´ÛŒ Ù¾ÛÙ†Ú†Ø§Ù†Ø§ ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø¨Ø±ØŒ Ø­Ø¯ÛŒØ« 2580" },
                { "id": 38, "hadith": "Ø¬Ùˆ Ú†ÛŒØ² ØªÙ…ÛÛŒÚº Ø´Ú© Ù…ÛŒÚº ÚˆØ§Ù„Û’ Ø§Ø³Û’ Ú†Ú¾ÙˆÚ‘ Ø¯Ùˆ Ø§ÙˆØ± Ø¬Ùˆ Ø´Ú© Ù†Û Ø¯Ù„Ø§Ø¦Û’ Ø§Ø³Û’ Ø§Ø®ØªÛŒØ§Ø± Ú©Ø±ÙˆÛ”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ø§Ù„Ø§Ø¯Ø¨ Ø§Ù„Ù…ÙØ±Ø¯ØŒ Ø­Ø¯ÛŒØ« 547 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ù…Ø³Ø§Ù‚Ø§Ø©ØŒ Ø­Ø¯ÛŒØ« 1599" },
                { "id": 39, "hadith": "Ø¯Ù†ÛŒØ§ Ù…ÙˆÙ…Ù† Ú©Û’ Ù„Ø¦Û’ Ù‚ÛŒØ¯ Ø®Ø§Ù†Û Ø§ÙˆØ± Ú©Ø§ÙØ± Ú©Û’ Ù„Ø¦Û’ Ø¬Ù†Øª ÛÛ’Û”", "reference": "ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø²ÛØ¯ØŒ Ø­Ø¯ÛŒØ« 2956" },
                { "id": 40, "hadith": "Ø¬Ùˆ Ø§Ù„Ù„Û Ø§ÙˆØ± Ø¢Ø®Ø±Øª Ù¾Ø± Ø§ÛŒÙ…Ø§Ù† Ø±Ú©Ú¾ØªØ§ ÛÛ’ ÙˆÛ Ø§Ù¾Ù†Û’ Ù¾Ú‘ÙˆØ³ÛŒ Ú©Ùˆ ØªÚ©Ù„ÛŒÙ Ù†Û Ø¯Û’Û”", "reference": "ØµØ­ÛŒØ­ Ø¨Ø®Ø§Ø±ÛŒ: Ú©ØªØ§Ø¨ Ø§Ù„Ø§Ø¯Ø¨ØŒ Ø­Ø¯ÛŒØ« 6016 | ØµØ­ÛŒØ­ Ù…Ø³Ù„Ù…: Ú©ØªØ§Ø¨ Ø§Ù„Ø§ÛŒÙ…Ø§Ù†ØŒ Ø­Ø¯ÛŒØ« 48" }
            ]
        };

        // PWA & Service Worker Variables
        let deferredPrompt;
        let swRegistration;

        // App state
        let currentHadithIndex = 0;
        let selectedSchedule = null;
        let notificationTimeouts = [];

        // User data structure
        let userData = {
            totalRead: 0,
            totalPracticed: 0,
            currentStreak: 0,
            lastReadDate: null,
            lastPracticedDate: null,
            practicedHadiths: [],
            readHadiths: [],
            recentHadiths: [],
            schedule: null,
            scheduleStartDate: null,
            settings: {
                morningTime: '07:00',
                eveningTime: '19:00',
                morningEnabled: false,
                eveningEnabled: false
            },
            notifications: {
                lastMorningNotification: null,
                lastEveningNotification: null
            }
        };

        // Proper Service Worker code with background notifications
        const serviceWorkerCode = `
            const CACHE_NAME = 'hadith-app-v2';
            const urlsToCache = [
                '/',
                '/manifest.json'
            ];

            // Install event
            self.addEventListener('install', event => {
                console.log('SW: Installing...');
                event.waitUntil(
                    caches.open(CACHE_NAME)
                        .then(cache => cache.addAll(urlsToCache))
                        .then(() => self.skipWaiting())
                );
            });

            // Activate event
            self.addEventListener('activate', event => {
                console.log('SW: Activating...');
                event.waitUntil(
                    caches.keys().then(cacheNames => {
                        return Promise.all(
                            cacheNames.map(cacheName => {
                                if (cacheName !== CACHE_NAME) {
                                    return caches.delete(cacheName);
                                }
                            })
                        );
                    }).then(() => self.clients.claim())
                );
            });

            // Fetch event
            self.addEventListener('fetch', event => {
                event.respondWith(
                    caches.match(event.request)
                        .then(response => {
                            return response || fetch(event.request);
                        })
                );
            });

            // Message handler for scheduling notifications
            self.addEventListener('message', event => {
                if (event.data && event.data.type === 'SCHEDULE_NOTIFICATIONS') {
                    const { morningTime, eveningTime, morningEnabled, eveningEnabled } = event.data;
                    scheduleNotifications(morningTime, eveningTime, morningEnabled, eveningEnabled);
                }
            });

            // Schedule notifications
            function scheduleNotifications(morningTime, eveningTime, morningEnabled, eveningEnabled) {
                const now = new Date();
                
                // Schedule for next 7 days
                for (let i = 0; i < 7; i++) {
                    const targetDate = new Date(now);
                    targetDate.setDate(now.getDate() + i);
                    
                    if (morningEnabled) {
                        const [hours, minutes] = morningTime.split(':');
                        const morningDateTime = new Date(targetDate);
                        morningDateTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);
                        
                        if (morningDateTime > now) {
                            const delay = morningDateTime.getTime() - now.getTime();
                            setTimeout(() => {
                                showNotification('ØµØ¨Ø­ Ú©ÛŒ ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ - Ø­Ø¯ÛŒØ« Ù…Ø¨Ø§Ø±Ú©', 'Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÛŒÚ©Ù…! Ø¢Ø¬ Ú©ÛŒ Ø¨Ø§Ø¨Ø±Ú©Øª Ø­Ø¯ÛŒØ« Ù¾Ú‘Ú¾ÛŒÚº ğŸ“–', 'morning');
                            }, delay);
                        }
                    }
                    
                    if (eveningEnabled) {
                        const [hours, minutes] = eveningTime.split(':');
                        const eveningDateTime = new Date(targetDate);
                        eveningDateTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);
                        
                        if (eveningDateTime > now) {
                            const delay = eveningDateTime.getTime() - now.getTime();
                            setTimeout(() => {
                                showNotification('Ø´Ø§Ù… Ú©ÛŒ ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ - Ø­Ø¯ÛŒØ« Ù…Ø¨Ø§Ø±Ú©', 'Ø¢Ø¬ Ú©ÛŒ Ø­Ø¯ÛŒØ« Ù¾Ø± ØºÙˆØ± Ú©Ø±ÛŒÚº Ø§ÙˆØ± Ø¹Ù…Ù„ Ú©Ø§ ÙÛŒØµÙ„Û Ú©Ø±ÛŒÚº ğŸŒ™', 'evening');
                            }, delay);
                        }
                    }
                }
            }

            // Show notification
            function showNotification(title, body, tag) {
                self.registration.showNotification(title, {
                    body: body,
                    icon: createIcon(),
                    badge: createIcon(),
                    tag: tag,
                    renotify: true,
                    requireInteraction: false,
                    vibrate: [200, 100, 200],
                    actions: [
                        {
                            action: 'open',
                            title: 'Ú©Ú¾ÙˆÙ„ÛŒÚº'
                        },
                        {
                            action: 'close',
                            title: 'Ø¨Ø¹Ø¯ Ù…ÛŒÚº'
                        }
                    ]
                });
            }

            // Create notification icon
            function createIcon() {
                return 'data:image/svg+xml;base64,' + btoa(\`
                    <svg width="192" height="192" viewBox="0 0 192 192" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="192" height="192" rx="24" fill="#2D5016"/>
                        <text x="96" y="120" text-anchor="middle" fill="white" font-size="72">ğŸ“–</text>
                    </svg>
                \`);
            }

            // Handle notification click
            self.addEventListener('notificationclick', event => {
                event.notification.close();
                
                event.waitUntil(
                    self.clients.matchAll().then(clients => {
                        if (clients.length > 0) {
                            return clients[0].focus();
                        } else {
                            return self.clients.openWindow('/');
                        }
                    })
                );
            });
        `;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function () {
            initializeServiceWorker();
            loadUserData();
            displayCurrentDate();
            checkUserSchedule();
            initializeNotifications();
            updateNotificationStatus();
            initializePWA();
        });

        // Initialize Service Worker
        async function initializeServiceWorker() {
            if ('serviceWorker' in navigator) {
                try {
                    const blob = new Blob([serviceWorkerCode], { type: 'application/javascript' });
                    const swUrl = URL.createObjectURL(blob);

                    swRegistration = await navigator.serviceWorker.register(swUrl);
                    console.log('Service Worker registered successfully');

                    // Wait for service worker to be ready
                    await navigator.serviceWorker.ready;
                    console.log('Service Worker is ready');

                } catch (error) {
                    console.error('Service Worker registration failed:', error);
                }
            }
        }

        // Initialize PWA
        function initializePWA() {
            // PWA install prompt
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                showPWAInstallPrompt();
            });

            // App installed event
            window.addEventListener('appinstalled', () => {
                hidePWAInstallPrompt();
                showSuccessMessage('Ø§ÛŒÙ¾ Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ø³Û’ Ø§Ù†Ø³Ù¹Ø§Ù„ ÛÙˆ Ú¯Ø¦ÛŒ!');
            });

            // Check if already installed
            if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone) {
                hidePWAInstallPrompt();
            }
        }

        // Show/hide PWA install prompt
        function showPWAInstallPrompt() {
            document.getElementById('pwa-install-prompt').classList.remove('hidden');
            document.getElementById('pwa-install-prompt-settings').classList.remove('hidden');
        }

        function hidePWAInstallPrompt() {
            document.getElementById('pwa-install-prompt').classList.add('hidden');
            document.getElementById('pwa-install-prompt-settings').classList.add('hidden');
        }

        // Install PWA
        async function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;

                if (outcome === 'accepted') {
                    showSuccessMessage('Ø§ÛŒÙ¾ Ø§Ù†Ø³Ù¹Ø§Ù„ ÛÙˆ Ø±ÛÛŒ ÛÛ’...');
                } else {
                    showInfoMessage('Ø¢Ù¾ Ø¨Ø¹Ø¯ Ù…ÛŒÚº Ø¨Ú¾ÛŒ Ø§ÛŒÙ¾ Ø§Ù†Ø³Ù¹Ø§Ù„ Ú©Ø± Ø³Ú©ØªÛ’ ÛÛŒÚº');
                }

                deferredPrompt = null;
            } else {
                showInfoMessage('Ø§ÛŒÙ¾ Ù¾ÛÙ„Û’ ÛÛŒ Ø§Ù†Ø³Ù¹Ø§Ù„ ÛÛ’ ÛŒØ§ Ø¢Ù¾ Ú©Ø§ browser PWA Ú©Ùˆ support Ù†ÛÛŒÚº Ú©Ø±ØªØ§');
            }
        }

        // Load and save user data
        function loadUserData() {
            const saved = localStorage.getItem('hadithAppData');
            if (saved) {
                const parsedData = JSON.parse(saved);
                userData = { ...userData, ...parsedData };
            }
        }

        function saveUserData() {
            localStorage.setItem('hadithAppData', JSON.stringify(userData));
        }

        // Initialize notifications
        function initializeNotifications() {
            updateNotificationStatus();

            if (Notification.permission === 'default') {
                setTimeout(() => {
                    requestNotificationPermission();
                }, 3000);
            }
        }

        // Update notification status display
        function updateNotificationStatus() {
            const statusDiv = document.getElementById('notificationStatus');
            const statusText = document.getElementById('notificationStatusText');
            const requestBtn = document.getElementById('requestNotificationBtn');

            if (!('Notification' in window)) {
                statusDiv.className = 'notification-status disabled';
                statusText.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Browser notifications Ú©Ùˆ support Ù†ÛÛŒÚº Ú©Ø±ØªØ§';
                requestBtn.style.display = 'none';
                return;
            }

            switch (Notification.permission) {
                case 'granted':
                    statusDiv.className = 'notification-status enabled';
                    statusText.innerHTML = '<i class="fas fa-bell"></i> ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ Ú©ÛŒ Ø§Ø¬Ø§Ø²Øª Ù…ÙˆØ¬ÙˆØ¯ ÛÛ’';
                    requestBtn.style.display = 'none';
                    updateNextNotificationInfo();
                    break;
                case 'denied':
                    statusDiv.className = 'notification-status disabled';
                    statusText.innerHTML = '<i class="fas fa-bell-slash"></i> ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ Ù…Ø³ØªØ±Ø¯ Ú©Ø± Ø¯ÛŒ Ú¯Ø¦ÛŒ<br><small>Browser settings Ù…ÛŒÚº Ø¬Ø§ Ú©Ø± Ø§Ø¬Ø§Ø²Øª Ø¯ÛŒÚº</small>';
                    requestBtn.style.display = 'none';
                    break;
                default:
                    statusDiv.className = 'notification-status';
                    statusText.innerHTML = '<i class="fas fa-bell-slash"></i> ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ Ú©ÛŒ Ø§Ø¬Ø§Ø²Øª Ù†ÛÛŒÚº Ù…Ù„ÛŒ';
                    requestBtn.style.display = 'block';
            }
        }

        // Request notification permission
        async function requestNotificationPermission() {
            if ('Notification' in window) {
                const permission = await Notification.requestPermission();
                updateNotificationStatus();

                if (permission === 'granted') {
                    showSuccessMessage('ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ Ú©ÛŒ Ø§Ø¬Ø§Ø²Øª Ù…Ù„ Ú¯Ø¦ÛŒ!');
                    updateNotificationSchedule();
                    setTimeout(testNotification, 2000);
                } else {
                    showInfoMessage('ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ Ú©ÛŒ Ø§Ø¬Ø§Ø²Øª Ù†ÛÛŒÚº Ù…Ù„ÛŒ');
                }
            }
        }

        // Test notification
        function testNotification() {
            if (Notification.permission === 'granted') {
                const notification = new Notification('Ù¹ÛŒØ³Ù¹ ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ - Ø­Ø¯ÛŒØ« Ù…Ø¨Ø§Ø±Ú©', {
                    body: 'ÛŒÛ Ù¹ÛŒØ³Ù¹ notification ÛÛ’Û” Ø§Ú¯Ø± ÛŒÛ Ù†Ø¸Ø± Ø¢Ø±ÛÛŒ ÛÛ’ ØªÙˆ notifications Ú©Ø§Ù… Ú©Ø± Ø±ÛÛŒ ÛÛŒÚº!',
                    icon: createNotificationIcon('ğŸ§ª'),
                    tag: 'test-notification'
                });

                notification.onclick = function () {
                    window.focus();
                    notification.close();
                };

                setTimeout(() => notification.close(), 5000);
                showSuccessMessage('Ù¹ÛŒØ³Ù¹ notification Ø¨Ú¾ÛŒØ¬ Ø¯ÛŒ Ú¯Ø¦ÛŒ!');
            } else {
                showInfoMessage('Ù¾ÛÙ„Û’ notifications Ú©ÛŒ Ø§Ø¬Ø§Ø²Øª Ø¯ÛŒÚº');
            }
        }

        // Create notification icon
        function createNotificationIcon(emoji) {
            const canvas = document.createElement('canvas');
            canvas.width = 128;
            canvas.height = 128;
            const ctx = canvas.getContext('2d');

            ctx.fillStyle = '#2D5016';
            ctx.fillRect(0, 0, 128, 128);

            ctx.font = '64px serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillStyle = 'white';
            ctx.fillText(emoji, 64, 64);

            return canvas.toDataURL();
        }

        // Update notification schedule
        function updateNotificationSchedule() {
            // Clear existing timeouts
            notificationTimeouts.forEach(timeout => clearTimeout(timeout));
            notificationTimeouts = [];

            if (Notification.permission !== 'granted') return;

            // Send schedule to service worker
            if (swRegistration && swRegistration.active) {
                swRegistration.active.postMessage({
                    type: 'SCHEDULE_NOTIFICATIONS',
                    morningTime: userData.settings.morningTime,
                    eveningTime: userData.settings.eveningTime,
                    morningEnabled: userData.settings.morningEnabled,
                    eveningEnabled: userData.settings.eveningEnabled
                });
            }

            // Also set up local timeouts for immediate scheduling
            scheduleLocalNotifications();
            updateNextNotificationInfo();
            saveUserData();
        }

        // Schedule local notifications (for when app is open)
        function scheduleLocalNotifications() {
            if (Notification.permission !== 'granted') return;

            const now = new Date();
            const today = now.toDateString();

            // Schedule morning notification
            if (userData.settings.morningEnabled && userData.notifications.lastMorningNotification !== today) {
                const [hours, minutes] = userData.settings.morningTime.split(':');
                const morningTime = new Date();
                morningTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);

                if (morningTime > now) {
                    const timeout = setTimeout(() => {
                        showLocalNotification('morning');
                        userData.notifications.lastMorningNotification = today;
                        saveUserData();
                    }, morningTime - now);
                    notificationTimeouts.push(timeout);
                }
            }

            // Schedule evening notification
            if (userData.settings.eveningEnabled && userData.notifications.lastEveningNotification !== today) {
                const [hours, minutes] = userData.settings.eveningTime.split(':');
                const eveningTime = new Date();
                eveningTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);

                if (eveningTime > now) {
                    const timeout = setTimeout(() => {
                        showLocalNotification('evening');
                        userData.notifications.lastEveningNotification = today;
                        saveUserData();
                    }, eveningTime - now);
                    notificationTimeouts.push(timeout);
                }
            }
        }

        // Show local notification
        function showLocalNotification(type) {
            if (Notification.permission !== 'granted') return;

            const messages = {
                morning: {
                    title: 'ØµØ¨Ø­ Ú©ÛŒ ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ - Ø­Ø¯ÛŒØ« Ù…Ø¨Ø§Ø±Ú©',
                    body: 'Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÛŒÚ©Ù…! Ø¢Ø¬ Ú©ÛŒ Ø¨Ø§Ø¨Ø±Ú©Øª Ø­Ø¯ÛŒØ« Ù¾Ú‘Ú¾ÛŒÚº',
                    icon: 'ğŸŒ…'
                },
                evening: {
                    title: 'Ø´Ø§Ù… Ú©ÛŒ ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ - Ø­Ø¯ÛŒØ« Ù…Ø¨Ø§Ø±Ú©',
                    body: 'Ø¢Ø¬ Ú©ÛŒ Ø­Ø¯ÛŒØ« Ù¾Ø± ØºÙˆØ± Ú©Ø±ÛŒÚº Ø§ÙˆØ± Ø¹Ù…Ù„ Ú©Ø§ ÙÛŒØµÙ„Û Ú©Ø±ÛŒÚº',
                    icon: 'ğŸŒ™'
                }
            };

            const message = messages[type];

            // Use Service Worker notification for better persistence
            if (swRegistration) {
                swRegistration.showNotification(message.title, {
                    body: message.body,
                    icon: createNotificationIcon(message.icon),
                    badge: createNotificationIcon('ğŸ“–'),
                    tag: `hadith-${type}`,
                    renotify: true,
                    requireInteraction: false,
                    vibrate: [200, 100, 200],
                    actions: [
                        { action: 'open', title: 'Ú©Ú¾ÙˆÙ„ÛŒÚº' },
                        { action: 'later', title: 'Ø¨Ø¹Ø¯ Ù…ÛŒÚº' }
                    ]
                });
            } else {
                // Fallback to regular notification
                const notification = new Notification(message.title, {
                    body: message.body,
                    icon: createNotificationIcon(message.icon),
                    tag: `hadith-${type}`
                });

                notification.onclick = function () {
                    window.focus();
                    notification.close();
                };

                setTimeout(() => notification.close(), 10000);
            }
        }

        // Update next notification info
        function updateNextNotificationInfo() {
            const infoDiv = document.getElementById('nextNotificationInfo');
            const timeDiv = document.getElementById('nextNotificationTime');

            if (!userData.settings.morningEnabled && !userData.settings.eveningEnabled) {
                infoDiv.classList.add('d-none');
                return;
            }

            const now = new Date();
            let nextNotifications = [];

            if (userData.settings.morningEnabled) {
                const [hours, minutes] = userData.settings.morningTime.split(':');
                const morningTime = new Date();
                morningTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);

                if (morningTime <= now) {
                    morningTime.setDate(morningTime.getDate() + 1);
                }

                nextNotifications.push({
                    type: 'ØµØ¨Ø­',
                    time: morningTime
                });
            }

            if (userData.settings.eveningEnabled) {
                const [hours, minutes] = userData.settings.eveningTime.split(':');
                const eveningTime = new Date();
                eveningTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);

                if (eveningTime <= now) {
                    eveningTime.setDate(eveningTime.getDate() + 1);
                }

                nextNotifications.push({
                    type: 'Ø´Ø§Ù…',
                    time: eveningTime
                });
            }

            if (nextNotifications.length > 0) {
                nextNotifications.sort((a, b) => a.time - b.time);
                const next = nextNotifications[0];
                const timeUntil = next.time - now;
                const hoursUntil = Math.floor(timeUntil / (1000 * 60 * 60));
                const minutesUntil = Math.floor((timeUntil % (1000 * 60 * 60)) / (1000 * 60));

                timeDiv.innerHTML = `
                    <strong>${next.type} Ú©ÛŒ ÛŒØ§Ø¯Ø¯ÛØ§Ù†ÛŒ:</strong> ${next.time.toLocaleTimeString('ur-PK', { hour: '2-digit', minute: '2-digit' })}
                    <br>
                    <small class="text-muted">
                        ${hoursUntil > 0 ? `${hoursUntil} Ú¯Ú¾Ù†Ù¹Û’ ` : ''}${minutesUntil} Ù…Ù†Ù¹ Ø¨Ø§Ù‚ÛŒ
                    </small>
                `;

                infoDiv.classList.remove('d-none');
            } else {
                infoDiv.classList.add('d-none');
            }
        }

        // Check user schedule
        function checkUserSchedule() {
            if (userData.schedule) {
                document.getElementById('schedule-selection').classList.add('d-none');
                document.getElementById('main-content').classList.remove('d-none');
                loadTodaysHadith();
                updateDashboard();
                loadSettings();
            }
        }

        // Display current date
        function displayCurrentDate() {
            const today = new Date();
            const options = {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                timeZone: 'Asia/Karachi'
            };
            document.getElementById('currentDate').textContent = today.toLocaleDateString('en-US', options);
        }

        // Schedule selection functions
        function selectSchedule(schedule) {
            selectedSchedule = schedule;

            document.querySelectorAll('.schedule-option').forEach(option => {
                option.classList.remove('selected');
            });

            document.querySelector(`[data-schedule="${schedule}"]`).classList.add('selected');
            document.getElementById('start-schedule').disabled = false;
        }

        function startSelectedSchedule() {
            if (selectedSchedule) {
                userData.schedule = selectedSchedule;
                userData.scheduleStartDate = new Date().toISOString();
                saveUserData();

                document.getElementById('schedule-selection').classList.add('d-none');
                document.getElementById('main-content').classList.remove('d-none');

                loadTodaysHadith();
                updateDashboard();
                loadSettings();

                if (Notification.permission !== 'granted') {
                    setTimeout(requestNotificationPermission, 2000);
                }
            }
        }

        // Load today's hadith
        function loadTodaysHadith() {
            const today = new Date();
            let hadithIndex;

            switch (userData.schedule) {
                case 'today':
                    const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
                    hadithIndex = (dayOfYear - 1) % ahadithData.ahadith.length;
                    break;
                case 'week':
                    const dayOfWeek = today.getDay();
                    hadithIndex = dayOfWeek % ahadithData.ahadith.length;
                    break;
                case 'month':
                    const dayOfMonth = today.getDate();
                    hadithIndex = (dayOfMonth - 1) % ahadithData.ahadith.length;
                    break;
                default:
                    hadithIndex = 0;
            }

            currentHadithIndex = hadithIndex;
            displayHadith(currentHadithIndex);

            const todayString = today.toDateString();
            if (userData.lastReadDate !== todayString) {
                userData.totalRead++;
                userData.lastReadDate = todayString;
                if (!userData.readHadiths.includes(currentHadithIndex)) {
                    userData.readHadiths.push(currentHadithIndex);
                }
                addToRecentHadiths(currentHadithIndex);
                saveUserData();
                updateDashboard();
            }
        }

        // Display hadith
        function displayHadith(index) {
            const hadith = ahadithData.ahadith[index];
            document.getElementById('hadithText').textContent = hadith.hadith;
            document.getElementById('hadithReference').textContent = hadith.reference;

            const practiceQuestion = document.getElementById('practice-question');
            if (userData.practicedHadiths.includes(index)) {
                practiceQuestion.style.display = 'none';
            } else {
                practiceQuestion.style.display = 'block';
            }
        }

        // Get random hadith
        function getRandomHadith() {
            currentHadithIndex = Math.floor(Math.random() * ahadithData.ahadith.length);
            displayHadith(currentHadithIndex);

            if (!userData.readHadiths.includes(currentHadithIndex)) {
                userData.readHadiths.push(currentHadithIndex);
                userData.totalRead++;
                addToRecentHadiths(currentHadithIndex);
                saveUserData();
                updateDashboard();
            }
        }

        // Mark as practiced
        function markAsPracticed(practiced) {
            if (!userData.practicedHadiths.includes(currentHadithIndex)) {
                if (practiced) {
                    userData.practicedHadiths.push(currentHadithIndex);
                    userData.totalPracticed++;
                    updateStreak();
                    showSuccessMessage('Ù…Ø§Ø´Ø§Ø¡ Ø§Ù„Ù„Û! Ø­Ø¯ÛŒØ« Ù¾Ø± Ø¹Ù…Ù„ Ú©Ø§ Ø§Ø¬Ø± Ø§Ù„Ù„Û Ø¢Ù¾ Ú©Ùˆ Ø¯Û’!');
                } else {
                    showInfoMessage('Ú©ÙˆØ¦ÛŒ Ø¨Ø§Øª Ù†ÛÛŒÚºØŒ Ø§Ú¯Ù„ÛŒ Ø¨Ø§Ø± Ø¶Ø±ÙˆØ± Ú©ÙˆØ´Ø´ Ú©Ø±ÛŒÚºÛ”');
                }

                updateRecentHadithPracticeStatus(currentHadithIndex, practiced);
                saveUserData();
                updateDashboard();
                document.getElementById('practice-question').style.display = 'none';
            }
        }

        // Update streak
        function updateStreak() {
            const today = new Date().toDateString();
            const yesterday = new Date(Date.now() - 86400000).toDateString();

            if (userData.lastPracticedDate === yesterday || userData.lastPracticedDate === today) {
                if (userData.lastPracticedDate !== today) {
                    userData.currentStreak++;
                }
            } else if (userData.lastPracticedDate !== today) {
                userData.currentStreak = 1;
            }

            userData.lastPracticedDate = today;
        }

        // Add to recent hadiths
        function addToRecentHadiths(hadithIndex) {
            const hadith = ahadithData.ahadith[hadithIndex];
            const recentItem = {
                id: hadith.id,
                hadith: hadith.hadith.substring(0, 50) + '...',
                fullHadith: hadith.hadith,
                date: new Date().toLocaleDateString('ur-PK'),
                practiced: userData.practicedHadiths.includes(hadithIndex),
                expanded: false,
            };

            userData.recentHadiths.unshift(recentItem);
            userData.recentHadiths = userData.recentHadiths.slice(0, 5);
        }

        // Update recent hadith practice status
        function updateRecentHadithPracticeStatus(hadithIndex, practiced) {
            const hadithId = ahadithData.ahadith[hadithIndex].id;
            const recentItem = userData.recentHadiths.find(item => item.id === hadithId);
            if (recentItem) {
                recentItem.practiced = practiced;
            }
        }

        // Toggle hadith expansion
        function toggleHadithExpansion(itemId) {
            const item = userData.recentHadiths.find(h => h.id === itemId);
            if (item) {
                item.expanded = !item.expanded;
                updateRecentHadiths();
                saveUserData();
            }
        }

        // Update recent hadiths display
        function updateRecentHadiths() {
            const container = document.getElementById('recentHadiths');
            if (userData.recentHadiths.length === 0) {
                container.innerHTML = '<p class="text-muted small">Ø§Ø¨Ú¾ÛŒ Ú©ÙˆØ¦ÛŒ Ø­Ø¯ÛŒØ« Ù†ÛÛŒÚº Ù¾Ú‘Ú¾ÛŒ</p>';
                return;
            }

            container.innerHTML = userData.recentHadiths.map(item => `
        <div class="border rounded p-2 mb-2 small">
            <div class="fw-bold" style="cursor: pointer;" onclick="toggleHadithExpansion(${item.id})">
                ${item.expanded ? item.fullHadith : item.hadith}
            </div>
            <div class="d-flex justify-content-between align-items-center mt-1">
                <span class="text-muted">${item.date}</span>
                <div class="d-flex align-items-center gap-2">
                    <span class="badge ${item.practiced ? 'bg-success' : 'bg-secondary'}">
                        ${item.practiced ? 'Ø¹Ù…Ù„ Ú©ÛŒØ§' : 'Ù¾Ú‘Ú¾Ø§'}
                    </span>
                   
                </div>
            </div>
        </div>
    `).join('');
        }


        // Show section navigation
        function showSection(section) {
            document.querySelectorAll('#mainNav .nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.getElementById(`${section}-nav`).classList.add('active');

            if (section === 'hadith') {
                document.getElementById('dashboard-content').classList.add('d-none');
                document.getElementById('settings-content').classList.add('d-none');
            } else if (section === 'dashboard') {
                document.getElementById('dashboard-content').classList.remove('d-none');
                document.getElementById('settings-content').classList.add('d-none');
                updateRecentHadiths();
            } else if (section === 'settings') {
                document.getElementById('dashboard-content').classList.add('d-none');
                document.getElementById('settings-content').classList.remove('d-none');
                updateNotificationStatus();
                updateNextNotificationInfo();
            }
        }

        // Update dashboard
        function updateDashboard() {
            document.getElementById('totalRead').textContent = userData.totalRead;
            document.getElementById('totalPracticed').textContent = userData.totalPracticed;
            document.getElementById('currentStreak').textContent = userData.currentStreak;

            const weeklyGoal = 7;
            const weeklyPracticed = Math.min(userData.currentStreak, weeklyGoal);
            document.getElementById('weeklyProgress').textContent = `${weeklyPracticed}/${weeklyGoal}`;
            document.getElementById('weeklyProgressBar').style.width = `${(weeklyPracticed / weeklyGoal) * 100}%`;

            const monthlyGoal = 30;
            const monthlyPracticed = Math.min(userData.totalPracticed, monthlyGoal);
            document.getElementById('monthlyProgress').textContent = `${monthlyPracticed}/${monthlyGoal}`;
            document.getElementById('monthlyProgressBar').style.width = `${(monthlyPracticed / monthlyGoal) * 100}%`;

            updateRecentHadiths();
        }

        // Load settings
        function loadSettings() {
            document.getElementById('morningTime').value = userData.settings.morningTime;
            document.getElementById('eveningTime').value = userData.settings.eveningTime;
            document.getElementById('morningEnabled').checked = userData.settings.morningEnabled;
            document.getElementById('eveningEnabled').checked = userData.settings.eveningEnabled;
            document.getElementById('schedule-change').value = userData.schedule || 'today';
        }

        // Save settings
        function saveSettings() {
            userData.settings.morningTime = document.getElementById('morningTime').value;
            userData.settings.eveningTime = document.getElementById('eveningTime').value;
            userData.settings.morningEnabled = document.getElementById('morningEnabled').checked;
            userData.settings.eveningEnabled = document.getElementById('eveningEnabled').checked;

            const newSchedule = document.getElementById('schedule-change').value;
            if (newSchedule !== userData.schedule) {
                userData.schedule = newSchedule;
                userData.scheduleStartDate = new Date().toISOString();
                loadTodaysHadith();
                showSuccessMessage('Ø´ÛŒÚˆÙˆÙ„ ØªØ¨Ø¯ÛŒÙ„ ÛÙˆ Ú¯ÛŒØ§ Ø§ÙˆØ± Ù†Ø¦ÛŒ Ø­Ø¯ÛŒØ« Ù„ÙˆÚˆ ÛÙˆ Ú¯Ø¦ÛŒ!');
            } else {
                showSuccessMessage('ØªØ±ØªÛŒØ¨Ø§Øª Ù…Ø­ÙÙˆØ¸ ÛÙˆ Ú¯Ø¦ÛŒÚº!');
            }

            updateNotificationSchedule();
            saveUserData();
        }

        // Reset progress
        function resetProgress() {
            if (confirm('Ú©ÛŒØ§ Ø¢Ù¾ ÙˆØ§Ù‚Ø¹ÛŒ ØªÙ…Ø§Ù… ÚˆÛŒÙ¹Ø§ ØµØ§Ù Ú©Ø±Ù†Ø§ Ú†Ø§ÛØªÛ’ ÛÛŒÚºØŸ')) {
                notificationTimeouts.forEach(timeout => clearTimeout(timeout));
                notificationTimeouts = [];

                userData = {
                    totalRead: 0,
                    totalPracticed: 0,
                    currentStreak: 0,
                    lastReadDate: null,
                    lastPracticedDate: null,
                    practicedHadiths: [],
                    readHadiths: [],
                    recentHadiths: [],
                    schedule: null,
                    scheduleStartDate: null,
                    settings: {
                        morningTime: '07:00',
                        eveningTime: '19:00',
                        morningEnabled: false,
                        eveningEnabled: false
                    },
                    notifications: {
                        lastMorningNotification: null,
                        lastEveningNotification: null
                    }
                };

                localStorage.removeItem('hadithAppData');
                showSuccessMessage('ØªÙ…Ø§Ù… ÚˆÛŒÙ¹Ø§ ØµØ§Ù ÛÙˆ Ú¯ÛŒØ§!');
                setTimeout(() => location.reload(), 2000);
            }
        }

        // Message display functions
        function showSuccessMessage(message) {
            const messageEl = document.createElement('div');
            messageEl.className = 'alert alert-success position-fixed top-0 start-50 translate-middle-x mt-3';
            messageEl.style.zIndex = '9999';
            messageEl.style.maxWidth = '90%';
            messageEl.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
            document.body.appendChild(messageEl);
            setTimeout(() => messageEl.remove(), 4000);
        }

        function showInfoMessage(message) {
            const messageEl = document.createElement('div');
            messageEl.className = 'alert alert-info position-fixed top-0 start-50 translate-middle-x mt-3';
            messageEl.style.zIndex = '9999';
            messageEl.style.maxWidth = '90%';
            messageEl.innerHTML = `<i class="fas fa-info-circle"></i> ${message}`;
            document.body.appendChild(messageEl);
            setTimeout(() => messageEl.remove(), 4000);
        }

        // Handle visibility changes
        document.addEventListener('visibilitychange', function () {
            if (!document.hidden) {
                updateNextNotificationInfo();
            }
        });

        // Handle page unload
        window.addEventListener('beforeunload', saveUserData);

        console.log('Hadith PWA with Background Notifications initialized');
    </script>

    <!-- PWA Manifest -->
    <script>
        const manifest = {
            "name": "Daily Hadith Mubarak",
            "short_name": "Hadith App",
            "description": "Daily Islamic Hadith with Background Notifications",
            "start_url": "/",
            "display": "standalone",
            "background_color": "#2D5016",
            "theme_color": "#2D5016",
            "orientation": "portrait",
            "scope": "/",
            "icons": [
                {
                    "src": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9IiMyRDUwMTYiLz4KPHN2ZyB4PSI0OCIgeT0iNDgiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGQ9Ik0xMiA2QzEzLjEgNiAxNCA2LjkgMTQgOFYxMEgxNkMxNi41IDEwIDE3IDEwLjQgMTcgMTFDMTcgMTEuNiAxNi41IDEyIDE2IDEySDE0VjE0QzE0IDE1LjEgMTMuMSAxNiAxMiAxNkMxMC45IDE2IDEwIDE1LjEgMTAgMTRWMTJIOEMzLjUgMTIgNyAxMS42IDcgMTFDNyAxMC40IDcuNSAxMCA4IDEwSDEwVjhDMTAgNi45IDEwLjkgNiAxMiA2WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cjwvc3ZnPgo=",
                    "sizes": "192x192",
                    "type": "image/svg+xml"
                },
                {
                    "src": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiByeD0iNjQiIGZpbGw9IiMyRDUwMTYiLz4KPHN2ZyB4PSIxMjgiIHk9IjEyOCIgd2lkdGg9IjI1NiIgaGVpZ2h0PSIyNTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiPgo8cGF0aCBkPSJNMTIgNkMxMy4xIDYgMTQgNi45IDE0IDhWMTBIMTZDMTYuNSAxMCAxNyAxMC40IDE3IDExQzE3IDExLjYgMTYuNSAxMiAxNiAxMkgxNFYxNEMxNDE1LjEgMTMuMSAxNiAxMiAxNkMxMC45IDE2IDEwIDE1LjEgMTAgMTRWMTJIOEM3LjUgMTIgNyAxMS42IDcgMTFDNyAxMC40IDcuNSAxMCA4IDEwSDEwVjhDMTAgNi45IDEwLjkgNiAxMiA2WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cjwvc3ZnPgo=",
                    "sizes": "512x512",
                    "type": "image/svg+xml"
                }
            ]
        };

        const manifestBlob = new Blob([JSON.stringify(manifest)], { type: 'application/json' });
        const manifestURL = URL.createObjectURL(manifestBlob);

        const link = document.createElement('link');
        link.rel = 'manifest';
        link.href = manifestURL;
        document.head.appendChild(link);
    </script>
</body>

</html>